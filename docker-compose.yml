version: '3'

services:
  fnupdater:
    build: .
    image: fnupdater-test
    volumes:
      - /opt/ftp:/opt/app/files
    restart: always
    env_file:
      - .env

  ftp:
    image: fauria/vsftpd
    ports:
      - 20-21:20-21
      - 21100-21105:21100-21105
    environment:
      - FTP_USER=ftpuser
      - FTP_PASS=11
      - PASV_MIN_PORT=21100
      - PASV_MAX_PORT=21105
      - PASV_ADDRESS=10.25.1.220
      - PASV_ADDR_RESOLVE=YES
    volumes:
      - /opt/ftp:/home/vsftpd/
      - /opt/ftp/logs:/var/log/vsftpd